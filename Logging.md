# Logging (Логирование)

Логи — это дневник вашего приложения. Они помогают понять, что происходило до того, как произошла ошибка, или просто следить за работоспособностью системы. Без хороших логов отладка на сервере (когда вы не можете запустить дебаггер) превращается в кошмар.

---

### Аннотация `@Slf4j` (Lombok)

Достаточно повесить `@Slf4j` над классом, и Lombok автоматически создаст для вас статический логгер.
Вам больше **не нужно** писать длинную и скучную строку: 
`private static final Logger log = LoggerFactory.getLogger(ThisClass.class);`

---

### Уровни логирования (Levels)

У логирования есть "важность" событий:

1. **`TRACE`**: Ооочень детальная информация (обычно не используется).
2. **`DEBUG`**: Информация для разработчиков при поиске багов. Не пишется на продакшене.
3. **`INFO`**: Нормальная работа приложения. "Пользователь зашел", "Письмо отправлено", "Запрос получен".
4. **`WARN`**: Что-то пошло не так, но приложение продолжает работать. "Неверный пароль", "Истек токен".
5. **`ERROR`**: Критическая ошибка. "Отвалилась база данных", "NullPointerException".

---

### Best Practices при написании логов

1. **Используйте плейсхолдеры `{}` вместо плюсов `+`**:
   - ❌ Плохо: `log.info("User " + username + " logged in from IP " + ip);`
   - ✅ Хорошо: `log.info("User {} logged in from IP {}", username, ip);`
   (Если логирование этого уровня отключено, строка не будет тратить ресурсы на склеивание плюсами).

2. **Не логируйте секреты!**
   - Никогда не пишите пароли, реальные номера кредиток или токены в логи. Логи могут читать многие люди.

3. **Логируйте ошибки (Exceptions) правильно**:
   - ❌ Плохо: `log.error("Error: " + e.getMessage());` (Вы потеряете стек-трейс!)
   - ✅ Хорошо: `log.error("Failed to process payment for order {}", orderId, e);` (Передайте сам объект `e` последним аргументом!).

---

### Настройка (application.yml)

По умолчанию Spring пишет все логи уровня `INFO` и выше только в консоль. Чтобы настроить логирование:

```yaml
logging:
  level:
    # Базовый уровень для всего приложения
    root: INFO
    # Для вашего собственного кода можно включить DEBUG (поможет при отладке)
    com.example.yourproject: DEBUG
    # Отключим лишний шум от Hibernate (тут можно оставить INFO/WARN)
    org.hibernate.SQL: DEBUG # Покажет SQL запросы в консоли

  file:
    # Если указать имя файла, логи будут писаться и в консоль, и в файл
    name: logs/application.log
```

---

### Вывод
Относитесь к логам как к сообщениям для самого себя в будущем, когда вы будете чинить баг в 3 часа ночи. Пишите понятно и по делу.
